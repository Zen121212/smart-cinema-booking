<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cinema Seat Booking</title>
    <style>
      /* General Body Styles */
      body {
        font-family: "Inter", sans-serif;
        margin: 0;
        padding: 20px;
        background-color: #1a1a2e; /* Dark background for cinema feel */
        color: #e0e0e0;
        display: flex;
        flex-direction: column;
        align-items: center;
        min-height: 100vh;
        box-sizing: border-box;
      }

      /* Main Container for the Booking Page */
      .container {
        background-color: #2a2a4a; /* Slightly lighter dark background */
        padding: 30px;
        border-radius: 12px;
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
        max-width: 800px;
        width: 100%;
        margin-bottom: 20px;
        box-sizing: border-box;
        border: 1px solid #4a4a7a;
      }

      /* Headings */
      h1,
      h2 {
        color: #e9e9e9;
        text-align: center;
        margin-bottom: 25px;
        text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.3);
      }

      /* Screen Indicator */
      .screen {
        background-color: #4a4a7a;
        color: #ffffff;
        padding: 15px 20px;
        margin-bottom: 30px;
        border-radius: 8px;
        text-align: center;
        font-weight: 700;
        letter-spacing: 2px;
        box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.5);
      }

      /* Seat Grid Container */
      .seats-grid {
        display: grid;
        grid-template-columns: repeat(
          auto-fit,
          minmax(40px, 1fr)
        ); /* Responsive columns */
        gap: 10px;
        justify-content: center;
        margin-bottom: 30px;
        padding: 10px;
        background-color: #3a3a5a;
        border-radius: 10px;
        box-shadow: inset 0 0 15px rgba(0, 0, 0, 0.5);
      }

      /* Individual Seat Styles */
      .seat {
        width: 40px;
        height: 40px;
        background-color: #6a6a8a; /* Available seat color */
        border-radius: 8px; /* Rounded corners for seats */
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 0.8em;
        font-weight: 500;
        cursor: pointer;
        transition: background-color 0.2s ease, transform 0.2s ease;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        user-select: none; /* Prevent text selection */
        color: #ffffff;
      }

      /* Hover effect for available seats */
      .seat:not(.booked):not(.selected):hover {
        background-color: #8a8ac0;
        transform: scale(1.05);
      }

      /* Selected Seat Style */
      .seat.selected {
        background-color: #00bfff; /* Bright blue for selected */
        box-shadow: 0 0 15px rgba(0, 191, 255, 0.7); /* Glow effect */
        transform: scale(1.05);
        border: 2px solid #0099cc;
      }

      /* Booked Seat Style */
      .seat.booked {
        background-color: #e74c3c; /* Red for booked */
        cursor: not-allowed;
        opacity: 0.6;
        box-shadow: none;
      }

      /* Booking Summary Section */
      .booking-summary {
        background-color: #3a3a5a;
        padding: 20px;
        border-radius: 10px;
        margin-top: 20px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        text-align: center;
      }

      .booking-summary p {
        margin-bottom: 10px;
        font-size: 1.1em;
      }

      .booking-summary strong {
        color: #00bfff;
      }

      /* Buttons */
      .btn {
        display: inline-block;
        padding: 12px 30px;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-size: 1.1em;
        font-weight: 700;
        transition: background-color 0.3s ease, transform 0.2s ease,
          box-shadow 0.3s ease;
        text-align: center;
        text-decoration: none;
        margin-top: 20px;
        background: linear-gradient(
          145deg,
          #00bfff,
          #0099cc
        ); /* Gradient for primary button */
        color: white;
        box-shadow: 0 5px 15px rgba(0, 191, 255, 0.4);
      }

      .btn:hover {
        background: linear-gradient(145deg, #0099cc, #0077a0);
        transform: translateY(-3px);
        box-shadow: 0 8px 20px rgba(0, 191, 255, 0.6);
      }

      /* Message Box Styles */
      .message-box {
        position: fixed;
        top: 20px;
        left: 50%;
        transform: translateX(-50%);
        padding: 15px 25px;
        border-radius: 8px;
        z-index: 1000;
        display: none;
        font-family: "Inter", sans-serif;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        text-align: center;
        min-width: 250px;
        color: white;
      }
      .message-box.info {
        background-color: #3498db;
      }
      .message-box.success {
        background-color: #27ae60;
      }
      .message-box.error {
        background-color: #e74c3c;
      }

      /* Responsive adjustments */
      @media (max-width: 600px) {
        .container {
          padding: 20px;
        }
        .seat {
          width: 35px;
          height: 35px;
          font-size: 0.7em;
        }
        .seats-grid {
          gap: 8px;
        }
        .btn {
          padding: 10px 20px;
          font-size: 1em;
        }
      }

      @media (max-width: 400px) {
        .seat {
          width: 30px;
          height: 30px;
          font-size: 0.6em;
        }
        .seats-grid {
          gap: 6px;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>Movie Booking</h1>
      <div class="screen">SCREEN</div>

      <div id="seatsContainer" class="seats-grid"></div>

      <div class="booking-summary">
        <p>Selected Seats: <strong id="selectedSeatsList">None</strong></p>
        <p>Total Price: <strong id="totalPrice">$0.00</strong></p>
        <button id="bookNowBtn" class="btn">Book Now</button>
      </div>
    </div>
    <div id="messageBox" class="message-box"></div>

    <script>
      const rows = ["A", "B", "C", "D", "E"];
      const seatsPerRow = 10;
      const seatPrice = 12.5;

      let selectedSeats = [];
      let bookedSeats = [];

      // Simulate some already booked seats (e.g., fetched from a database)
      // Format: {row: 'A', number: 3}, {row: 'C', number: 7}
      const initialBookedSeats = [
        { row: "A", number: 3 },
        { row: "A", number: 4 },
        { row: "B", number: 1 },
        { row: "D", number: 9 },
        { row: "E", number: 5 },
      ];

      /**
       * Initializes the booking page by setting up initial booked seats
       * and rendering the seat layout.
       */
      document.addEventListener("DOMContentLoaded", () => {
        bookedSeats = initialBookedSeats; // Load initial booked seats
        renderSeats();
        updateBookingSummary();

        // Attach event listener to the Book Now button
        document
          .getElementById("bookNowBtn")
          .addEventListener("click", bookSeats);
      });

      /**
       * Renders the cinema seat layout dynamically.
       */
      function renderSeats() {
        const seatsContainer = document.getElementById("seatsContainer");
        seatsContainer.innerHTML = ""; // Clear existing seats

        rows.forEach((row) => {
          for (let i = 1; i <= seatsPerRow; i++) {
            const seatId = `${row}${i}`;
            const seatDiv = document.createElement("div");
            seatDiv.classList.add("seat");
            seatDiv.textContent = seatId;
            seatDiv.dataset.row = row;
            seatDiv.dataset.number = i;

            // Check if the seat is booked
            const isBooked = bookedSeats.some(
              (booked) => booked.row === row && booked.number === i
            );

            if (isBooked) {
              seatDiv.classList.add("booked");
            } else {
              // Add click listener only to available seats
              seatDiv.addEventListener("click", handleSeatClick);
            }
            seatsContainer.appendChild(seatDiv);
          }
        });
      }

      /**
       * Handles a click event on a seat. Toggles selection state.
       * @param {Event} event The click event.
       */
      function handleSeatClick(event) {
        const clickedSeat = event.target;

        // Do nothing if the seat is booked
        if (clickedSeat.classList.contains("booked")) {
          displayMessage("This seat is already booked!", "error");
          return;
        }

        const seatIdentifier = {
          row: clickedSeat.dataset.row,
          number: parseInt(clickedSeat.dataset.number),
        };

        const index = selectedSeats.findIndex(
          (seat) =>
            seat.row === seatIdentifier.row &&
            seat.number === seatIdentifier.number
        );

        if (index > -1) {
          // Seat is already selected, deselect it
          selectedSeats.splice(index, 1);
          clickedSeat.classList.remove("selected");
        } else {
          // Seat is not selected, select it
          selectedSeats.push(seatIdentifier);
          clickedSeat.classList.add("selected");
        }
        updateBookingSummary();
      }

      /**
       * Updates the displayed list of selected seats and the total price.
       */
      function updateBookingSummary() {
        const selectedSeatsListElem =
          document.getElementById("selectedSeatsList");
        const totalPriceElem = document.getElementById("totalPrice");

        if (selectedSeats.length === 0) {
          selectedSeatsListElem.textContent = "None";
          totalPriceElem.textContent = "$0.00";
        } else {
          // Sort selected seats for consistent display
          selectedSeats.sort((a, b) => {
            if (a.row === b.row) {
              return a.number - b.number;
            }
            return a.row.localeCompare(b.row);
          });

          const seatLabels = selectedSeats.map(
            (seat) => `${seat.row}${seat.number}`
          );
          selectedSeatsListElem.textContent = seatLabels.join(", ");
          totalPriceElem.textContent = `$${(
            selectedSeats.length * seatPrice
          ).toFixed(2)}`;
        }
      }

      /**
       * Simulates the booking process.
       */
      function bookSeats() {
        if (selectedSeats.length === 0) {
          displayMessage("Please select at least one seat!", "info");
          return;
        }

        // In a real application, you would send selectedSeats data to your backend here
        // using fetch or Axios.
        // Example: axios.post('/api/book-seats', { seats: selectedSeats, userId: 123 });

        // Simulate a successful booking after a short delay
        setTimeout(() => {
          // Add selected seats to the booked list
          bookedSeats = [...bookedSeats, ...selectedSeats];
          selectedSeats = []; // Clear selected seats

          renderSeats(); // Re-render to show new booked seats
          updateBookingSummary(); // Update summary

          displayMessage("Booking successful! Enjoy your movie!", "success");
        }, 1000); // Simulate network delay
      }

      /**
       * Displays a temporary message to the user.
       * @param {string} message The message to display.
       * @param {string} type The type of message (info, success, error) for styling.
       */
      function displayMessage(message, type = "info") {
        const messageBox = document.getElementById("messageBox");
        if (!messageBox) return; // Ensure element exists

        messageBox.textContent = message;
        messageBox.className = `message-box ${type}`; // Add type for styling
        messageBox.style.display = "block";

        // Hide the message after a few seconds
        setTimeout(() => {
          messageBox.style.display = "none";
        }, 3000);
      }
    </script>
  </body>
</html>
